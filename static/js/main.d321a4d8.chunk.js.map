{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","href","src","logo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","aria-label","onClick","onCardDelete","link","name","onCardClick","onCardLike","length","Main","style","backgroundImage","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","rest","Footer","now","Date","getFullYear","PopupWithForm","title","children","btnTitle","isOpen","onClose","overlayClick","onSubmit","method","noValidate","EditProfilePopup","useState","setName","description","setDescription","useEffect","onOverlay","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","required","onChange","target","value","defaultValue","EditAvatarPopup","avatarLinkInput","createRef","onUpdateAvatar","current","ref","AddPlacePopup","placeName","setPlaceName","placeUrl","setPlaceUrl","onAddPlaceSubmit","ConfirmDeletePopup","onConfirmDeleteSubmit","card","ImagePopup","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","fetch","then","_handleResult","data","body","JSON","stringify","addLike","deleteLike","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","setCurrentUser","setCards","getUserData","userData","catch","error","alert","getAllCards","handleClosePopupOverlay","event","classList","contains","closeAllPopups","handleEsc","keyCode","window","addEventListener","removeEventListener","Provider","changeLikeCardStatus","newCard","newCards","c","updateUserData","newUserData","updateAvatar","newData","addNewCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d321a4d8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import logo from '../images/logo.svg';\r\n\r\nfunction Header () {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__container\">\r\n        <a className=\"header__link\" href=\"https://yandex.ru/\">\r\n          <img className=\"logo\" src={logo} alt=\"Логотип Mesto\" />\r\n        </a>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card (props) {\r\n  const currentUser = React.useContext(CurrentUserContext); \r\n  const isOwn = props.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n    `button button_action_remove ${isOwn && 'button_action_remove_active'}`\r\n  ); \r\n  const isLiked = props.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n    `button button_action_like ${isLiked && 'button_action_like_active'}`\r\n  );\r\n  \r\n  function handleClick() {\r\n    props.onCardClick(props);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props);\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    props.onCardDelete(props);\r\n  }\r\n\r\n  return (\r\n    <li className=\"cards-grid__item\">\r\n      <button \r\n        className={cardDeleteButtonClassName} \r\n        type=\"button\" \r\n        aria-label=\"Удалить карточку\"\r\n        onClick={handleCardDelete}>\r\n      </button>\r\n      <figure className=\"cards-grid__figure\">             \r\n        <div className=\"cards-grid__image-wrapper\">\r\n          <img \r\n            className=\"cards-grid__image\" \r\n            src={props.link} alt={`Изображение ${props.name}`}\r\n            onClick={handleClick}\r\n          />\r\n        </div>\r\n                                      \r\n        <figcaption className=\"cards-grid__caption\">\r\n          <h2 className=\"cards-grid__caption-title\">{props.name}</h2>\r\n          <div className=\"cards-grid__like-container\">\r\n            <button \r\n              className={cardLikeButtonClassName} \r\n              type=\"button\" \r\n              aria-label=\"Поставить лайк\"\r\n              onClick={handleLikeClick}>              \r\n            </button>\r\n            <span className=\"cards-grid__likes-counter\">{props.likes.length}</span>\r\n          </div>\r\n        </figcaption>\r\n      </figure>  \r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main (props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__content\"> \r\n          <div className=\"profile__avatar-container\">  \r\n            <div \r\n              className=\"profile__image\" \r\n              style={{ backgroundImage: `url(${currentUser.avatar})` }} \r\n              alt={`Изображение ${currentUser.name}`}>\r\n            </div>\r\n            <button className=\"button button_action_update-avatar\" onClick={props.onEditAvatar}></button>\r\n          </div>\r\n          <div className=\"profile__info\">                       \r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"button button_action_edit\" onClick={props.onEditProfile} type=\"button\" \r\n              aria-label=\"Открыть форму редактирования\"></button>                      \r\n            <p className=\"profile__job\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <button className=\"button button_action_add\" onClick={props.onAddPlace} \r\n          type=\"button\" aria-label=\"Добавить информацию\"></button>\r\n      </section>\r\n\r\n      <section className=\"cards-grid\">\r\n        <ul className=\"cards-grid__list\">\r\n          {\r\n            props.cards.map(({ _id, ...rest}) => <Card key={_id} _id={_id} {...rest} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete}/>)\r\n          }\r\n        </ul>\r\n      </section>      \r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main;","function Footer () {\r\n  \r\n  let now = new Date();\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {now.getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","function PopupWithForm ( {title, children, btnTitle, name, isOpen, onClose, overlayClick, onSubmit} ) {\r\n\r\n  return (\r\n    <div \r\n    className={ `popup popup_${name} ${isOpen && 'popup_opened'}` } onClick={overlayClick}>\r\n      <div className=\"popup__container popup__container_with-form\"> \r\n        <button\r\n          className=\"popup__close\"\r\n          type=\"button\"\r\n          aria-label=\"Закрыть попап\"\r\n          onClick={onClose}>\r\n        </button>\r\n          \r\n        <form className={`form form_${name}`} method=\"POST\" name={`${name}Form`} noValidate onSubmit={onSubmit}>  \r\n          <h3 className=\"popup__title form__title\">{title}</h3>\r\n          {children}\r\n          <button className=\"form__button\" type=\"submit\">{btnTitle}</button>\r\n        </form>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [ name, setName ] = React.useState('');\r\n  const [ description, setDescription ] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]); \r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n\r\n    props.onClose();\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n        title='Редактировать профиль'\r\n        btnTitle='Сохранить'\r\n        name='edit'\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        overlayClick={props.onOverlay}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input \r\n          id=\"name-input\" \r\n          name=\"name\" \r\n          type=\"text\" \r\n          className=\"form__input form__input_text_name\" \r\n          placeholder=\"Имя\" \r\n          minLength=\"2\" \r\n          maxLength=\"40\" \r\n          required \r\n          onChange={handleChangeName}\r\n          //value={name}\r\n          defaultValue={name}\r\n        />\r\n        <span id=\"name-input-error\" className=\"form__input-error\"></span>\r\n\r\n        <input \r\n          id=\"about-input\" \r\n          name=\"about\" \r\n          type=\"text\" \r\n          className=\"form__input form__input_text_job\" \r\n          placeholder=\"Род деятельности\" \r\n          minLength=\"2\" \r\n          maxLength=\"200\" \r\n          required \r\n          onChange={handleChangeDescription}\r\n          defaultValue={description}\r\n        />\r\n        <span id=\"about-input-error\" className=\"form__input-error\"></span>\r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  let avatarLinkInput = React.createRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onUpdateAvatar({\r\n      avatar: avatarLinkInput.current.value,\r\n    });\r\n\r\n    props.onClose();\r\n    avatarLinkInput.current.value = '';\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Обновить аватар'\r\n      btnTitle='Сохранить'\r\n      name='update-avatar'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      overlayClick={props.onOverlay}\r\n      onSubmit={handleSubmit}\r\n    >  \r\n      <input \r\n        id=\"url-input\"\r\n        name=\"avatar\"\r\n        type=\"url\"\r\n        className=\"form__input form__input_text_link\" \r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n        ref={avatarLinkInput}\r\n      />\r\n      <span id=\"url-input-error\" className=\"form__input-error\"></span>  \r\n    </PopupWithForm>\r\n  ) \r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [ placeName, setPlaceName ] = React.useState('');\r\n  const [ placeUrl, setPlaceUrl ] = React.useState('');\r\n\r\n  function handleChangePlaceName(e) {\r\n    setPlaceName(e.target.value);\r\n  }\r\n\r\n  function handleChangePlaceUrl(e) {\r\n    setPlaceUrl(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onAddPlaceSubmit({\r\n      name: placeName,\r\n      link: placeUrl,\r\n    });\r\n\r\n    props.onClose();\r\n    \r\n    setPlaceName('');\r\n    setPlaceUrl('');\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n        title='Новое место'\r\n        btnTitle='Создать'\r\n        name='add'\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        overlayClick={props.onOverlay}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          id=\"name-input\"\r\n          name = \"name\"\r\n          type=\"text\"\r\n          className=\"form__input form__input_text_place\" \r\n          placeholder=\"Название\"\r\n          minLength=\"1\"\r\n          maxLength=\"30\"\r\n          required\r\n          onChange={handleChangePlaceName}\r\n          value={placeName}\r\n        />\r\n        <span id=\"name-input-error\" className=\"form__input-error\"></span>\r\n\r\n        <input\r\n          id=\"url-input\"\r\n          name = \"link\"\r\n          type=\"url\"\r\n          className=\"form__input form__input_text_link\" \r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n          onChange={handleChangePlaceUrl}\r\n          value={placeUrl}\r\n        />\r\n        <span id=\"url-input-error\" className=\"form__input-error\"></span>       \r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmDeletePopup(props) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    \r\n    props.onConfirmDeleteSubmit(props.card);\r\n    props.onClose();\r\n  }\r\n  \r\n  return(\r\n    <PopupWithForm\r\n      title='Вы уверены?'\r\n      btnTitle='Да'\r\n      name='confirm'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      overlayClick={props.onOverlay}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ConfirmDeletePopup;","function ImagePopup ({ card, onClose, overlayClick }) {\r\n\r\n  return (\r\n    <div className={`popup popup_pic ${(card != null) && 'popup_opened'}`} onClick={overlayClick}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          className=\"popup__close\"\r\n          type=\"button\"\r\n          aria-label=\"Закрыть попап\"\r\n          onClick={onClose}>\r\n        </button>\r\n\r\n        <figure className=\"figure-pic\">         \r\n          <img \r\n            className=\"figure-pic__image\" \r\n            src={card ? card.link : ''}\r\n            alt={card ? card.name : ''}\r\n          />\r\n          <figcaption className=\"figure-pic__figcaption\">\r\n            {card ? card.name : ''}\r\n          </figcaption>\r\n        </figure>\r\n      </div>                                              \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n  constructor(config) {\r\n    this._url = config.url;\r\n    this._headers = config.headers;\r\n  }\r\n\r\n  _handleResult(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(\"Произошла ошибка\");\r\n  }\r\n\r\n  getAllCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n  \r\n  addNewCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify(data),\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  updateUserData(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._url}/cards/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  addLike(id) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    })\r\n    .then((res) => {\r\n      //console.log(res)\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked) {\r\n    if(isLiked) {\r\n      return this.addLike(id);\r\n    } else {\r\n      return this.deleteLike(id);\r\n    }\r\n  }\r\n\r\n  updateAvatar(data) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then((res) => {\r\n      return this._handleResult(res);\r\n    })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-18',\r\n  headers: {\r\n    authorization: '87c4662d-efe2-4049-bb5c-28aff5c45986',\r\n    'content-type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;","import React from 'react';\nimport '../index.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [ isEditProfilePopupOpen, setIsEditProfilePopupOpen ] = React.useState(false);\n  const [ isAddPlacePopupOpen, setIsAddPlacePopupOpen ] = React.useState(false);\n  const [ isEditAvatarPopupOpen, setIsEditAvatarPopupOpen ] = React.useState(false);\n  const [ isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen ] = React.useState(false);\n  const [ selectedCard, setSelectedCard ] = React.useState(null); \n  const [ cardToDelete, setCardToDelete ] = React.useState(null);\n  const [ currentUser, setCurrentUser ] = React.useState('');\n  const [ cards, setCards ] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getUserData()\n    .then(userData => {\n      setCurrentUser(userData);\n    })\n    .catch((error) => alert(error)) \n  }, []);\n\n  React.useEffect(() => {\n    api.getAllCards()\n    .then(data => {\n      setCards(data);\n    })\n    .catch((error) => alert(error))\n  }, []);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      // Обновляем стейт\n      setCards(newCards);\n    })\n    .catch((error) => alert(error))\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    })\n    .catch((error) => alert(error))\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n\n  const handleDeleteCardClick = (card) => {\n    setIsConfirmDeletePopupOpen(true);\n    setCardToDelete(card);  \n  }\n\n  const handleClosePopupOverlay = (event) => {\n    const target = event.target;\n    if(target.classList.contains('popup') || target.classList.contains('popup__close')) {\n      closeAllPopups();\n    }\n  }\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setSelectedCard(null);\n    setCardToDelete(null);\n  };\n\n  React.useEffect(() => {\n    function handleEsc (event) {\n      if (event.keyCode === 27) \n        closeAllPopups();\n    }\n    window.addEventListener('keydown', handleEsc);\n\n    return () => {\n      window.removeEventListener('keydown', handleEsc);\n    }\n  })\n\n  function handleUpdateUser(userData) {\n    api.updateUserData(userData)\n    .then((newUserData)=> {\n      setCurrentUser(newUserData);\n    })\n    .catch((error) => alert(error))\n  }\n\n  function handleUpdateAvatar(data) {\n    api.updateAvatar(data)\n    .then((newData) => {\n      setCurrentUser(newData);\n    })\n    .catch((error) => alert(error))\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.addNewCard(data)\n    .then((newCard) => {\n      setCards([newCard, ...cards]); \n    })\n    .catch((error) => alert(error))\n  }\n\n  return (\n    <CurrentUserContext.Provider value = {currentUser}>\n    <div className=\"page\">      \n      <Header />\n\n      <div className=\"page__container\">  \n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleDeleteCardClick}\n            cards={cards}\n          />\n          \n          <Footer />\n      </div>\n\n      <ImagePopup \n        card={selectedCard}\n        onClose={closeAllPopups}\n        overlayClick={handleClosePopupOverlay}\n      />\n\n      <EditProfilePopup \n        isOpen={isEditProfilePopupOpen} \n        onClose={closeAllPopups} \n        onOverlay={handleClosePopupOverlay}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onOverlay={handleClosePopupOverlay}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <AddPlacePopup \n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups} \n        onOverlay={handleClosePopupOverlay}\n        onAddPlaceSubmit={handleAddPlaceSubmit}\n      />\n\n      <ConfirmDeletePopup \n        isOpen={isConfirmDeletePopupOpen}\n        onClose={closeAllPopups} \n        onOverlay={handleClosePopupOverlay}\n        onConfirmDeleteSubmit={handleCardDelete}\n        card={cardToDelete}\n      />\n\n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js'\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}