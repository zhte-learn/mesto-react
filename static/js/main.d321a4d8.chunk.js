(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{18:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),i=n(8),o=n.n(i),s=(n(7),n(11)),l=n(2),u=n.p+"static/media/logo.a307e1c4.svg";var d=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("div",{className:"header__container",children:Object(a.jsx)("a",{className:"header__link",href:"https://yandex.ru/",children:Object(a.jsx)("img",{className:"logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto"})})})})},h=n(6),_=n(12),f=r.a.createContext();var p=function(e){var t=r.a.useContext(f),n=e.owner._id===t._id,c="button button_action_remove ".concat(n&&"button_action_remove_active"),i=e.likes.some((function(e){return e._id===t._id})),o="button button_action_like ".concat(i&&"button_action_like_active");return Object(a.jsxs)("li",{className:"cards-grid__item",children:[Object(a.jsx)("button",{className:c,type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){e.onCardDelete(e)}}),Object(a.jsxs)("figure",{className:"cards-grid__figure",children:[Object(a.jsx)("div",{className:"cards-grid__image-wrapper",children:Object(a.jsx)("img",{className:"cards-grid__image",src:e.link,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(e.name),onClick:function(){e.onCardClick(e)}})}),Object(a.jsxs)("figcaption",{className:"cards-grid__caption",children:[Object(a.jsx)("h2",{className:"cards-grid__caption-title",children:e.name}),Object(a.jsxs)("div",{className:"cards-grid__like-container",children:[Object(a.jsx)("button",{className:o,type:"button","aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a",onClick:function(){e.onCardLike(e)}}),Object(a.jsx)("span",{className:"cards-grid__likes-counter",children:e.likes.length})]})]})]})]})};var j=function(e){var t=r.a.useContext(f);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__content",children:[Object(a.jsxs)("div",{className:"profile__avatar-container",children:[Object(a.jsx)("div",{className:"profile__image",style:{backgroundImage:"url(".concat(t.avatar,")")},alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(t.name)}),Object(a.jsx)("button",{className:"button button_action_update-avatar",onClick:e.onEditAvatar})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{className:"button button_action_edit",onClick:e.onEditProfile,type:"button","aria-label":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}),Object(a.jsx)("p",{className:"profile__job",children:t.about})]})]}),Object(a.jsx)("button",{className:"button button_action_add",onClick:e.onAddPlace,type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})]}),Object(a.jsx)("section",{className:"cards-grid",children:Object(a.jsx)("ul",{className:"cards-grid__list",children:e.cards.map((function(t){var n=t._id,c=Object(_.a)(t,["_id"]);return Object(a.jsx)(p,Object(h.a)(Object(h.a)({_id:n},c),{},{onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete}),n)}))})})]})};var m=function(){var e=new Date;return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e.getFullYear()," Mesto Russia"]})})};var b=function(e){var t=e.title,n=e.children,c=e.btnTitle,r=e.name,i=e.isOpen,o=e.onClose,s=e.overlayClick,l=e.onSubmit;return Object(a.jsx)("div",{className:"popup popup_".concat(r," ").concat(i&&"popup_opened"),onClick:s,children:Object(a.jsxs)("div",{className:"popup__container popup__container_with-form",children:[Object(a.jsx)("button",{className:"popup__close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:o}),Object(a.jsxs)("form",{className:"form form_".concat(r),method:"POST",name:"".concat(r,"Form"),noValidate:!0,onSubmit:l,children:[Object(a.jsx)("h3",{className:"popup__title form__title",children:t}),n,Object(a.jsx)("button",{className:"form__button",type:"submit",children:c})]})]})})};var O=function(e){var t=r.a.useContext(f),n=r.a.useState(""),c=Object(l.a)(n,2),i=c[0],o=c[1],s=r.a.useState(""),u=Object(l.a)(s,2),d=u[0],h=u[1];return r.a.useEffect((function(){o(t.name),h(t.about)}),[t]),Object(a.jsxs)(b,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",btnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"edit",isOpen:e.isOpen,onClose:e.onClose,overlayClick:e.onOverlay,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:i,about:d}),e.onClose()},children:[Object(a.jsx)("input",{id:"name-input",name:"name",type:"text",className:"form__input form__input_text_name",placeholder:"\u0418\u043c\u044f",minLength:"2",maxLength:"40",required:!0,onChange:function(e){o(e.target.value)},defaultValue:i}),Object(a.jsx)("span",{id:"name-input-error",className:"form__input-error"}),Object(a.jsx)("input",{id:"about-input",name:"about",type:"text",className:"form__input form__input_text_job",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",minLength:"2",maxLength:"200",required:!0,onChange:function(e){h(e.target.value)},defaultValue:d}),Object(a.jsx)("span",{id:"about-input-error",className:"form__input-error"})]})};var v=function(e){var t=r.a.createRef();return Object(a.jsxs)(b,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",btnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"update-avatar",isOpen:e.isOpen,onClose:e.onClose,overlayClick:e.onOverlay,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value}),e.onClose(),t.current.value=""},children:[Object(a.jsx)("input",{id:"url-input",name:"avatar",type:"url",className:"form__input form__input_text_link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,ref:t}),Object(a.jsx)("span",{id:"url-input-error",className:"form__input-error"})]})};var x=function(e){var t=r.a.useState(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=r.a.useState(""),s=Object(l.a)(o,2),u=s[0],d=s[1];return Object(a.jsxs)(b,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",btnTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",name:"add",isOpen:e.isOpen,onClose:e.onClose,overlayClick:e.onOverlay,onSubmit:function(t){t.preventDefault(),e.onAddPlaceSubmit({name:c,link:u}),e.onClose(),i(""),d("")},children:[Object(a.jsx)("input",{id:"name-input",name:"name",type:"text",className:"form__input form__input_text_place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",required:!0,onChange:function(e){i(e.target.value)},value:c}),Object(a.jsx)("span",{id:"name-input-error",className:"form__input-error"}),Object(a.jsx)("input",{id:"url-input",name:"link",type:"url",className:"form__input form__input_text_link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:function(e){d(e.target.value)},value:u}),Object(a.jsx)("span",{id:"url-input-error",className:"form__input-error"})]})};var C=function(e){return Object(a.jsx)(b,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",btnTitle:"\u0414\u0430",name:"confirm",isOpen:e.isOpen,onClose:e.onClose,overlayClick:e.onOverlay,onSubmit:function(t){t.preventDefault(),e.onConfirmDeleteSubmit(e.card),e.onClose()}})};var g=function(e){var t=e.card,n=e.onClose,c=e.overlayClick;return Object(a.jsx)("div",{className:"popup popup_pic ".concat(null!=t&&"popup_opened"),onClick:c,children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"popup__close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:n}),Object(a.jsxs)("figure",{className:"figure-pic",children:[Object(a.jsx)("img",{className:"figure-pic__image",src:t?t.link:"",alt:t?t.name:""}),Object(a.jsx)("figcaption",{className:"figure-pic__figcaption",children:t?t.name:""})]})]})})},k=n(9),N=n(10),y=new(function(){function e(t){Object(k.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(N.a)(e,[{key:"_handleResult",value:function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResult(t)}))}},{key:"getUserData",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResult(t)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResult(e)}))}},{key:"updateUserData",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResult(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResult(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return t._handleResult(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResult(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.addLike(e):this.deleteLike(e)}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResult(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-18",headers:{authorization:"87c4662d-efe2-4049-bb5c-28aff5c45986","content-type":"application/json"}});var S=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],i=r.a.useState(!1),o=Object(l.a)(i,2),u=o[0],h=o[1],_=r.a.useState(!1),p=Object(l.a)(_,2),b=p[0],k=p[1],N=r.a.useState(!1),S=Object(l.a)(N,2),L=S[0],E=S[1],D=r.a.useState(null),T=Object(l.a)(D,2),w=T[0],P=T[1],A=r.a.useState(null),R=Object(l.a)(A,2),U=R[0],F=R[1],q=r.a.useState(""),J=Object(l.a)(q,2),I=J[0],M=J[1],V=r.a.useState([]),B=Object(l.a)(V,2),G=B[0],H=B[1];r.a.useEffect((function(){y.getUserData().then((function(e){M(e)})).catch((function(e){return alert(e)}))}),[]),r.a.useEffect((function(){y.getAllCards().then((function(e){H(e)})).catch((function(e){return alert(e)}))}),[]);var z=function(e){var t=e.target;(t.classList.contains("popup")||t.classList.contains("popup__close"))&&Y()},Y=function(){c(!1),k(!1),h(!1),E(!1),P(null),F(null)};return r.a.useEffect((function(){function e(e){27===e.keyCode&&Y()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}})),Object(a.jsx)(f.Provider,{value:I,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(d,{}),Object(a.jsxs)("div",{className:"page__container",children:[Object(a.jsx)(j,{onEditProfile:function(){c(!0)},onAddPlace:function(){h(!0)},onEditAvatar:function(){k(!0)},onCardClick:function(e){P(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===I._id}));y.changeLikeCardStatus(e._id,!t).then((function(t){var n=G.map((function(n){return n._id===e._id?t:n}));H(n)})).catch((function(e){return alert(e)}))},onCardDelete:function(e){E(!0),F(e)},cards:G}),Object(a.jsx)(m,{})]}),Object(a.jsx)(g,{card:w,onClose:Y,overlayClick:z}),Object(a.jsx)(O,{isOpen:n,onClose:Y,onOverlay:z,onUpdateUser:function(e){y.updateUserData(e).then((function(e){M(e)})).catch((function(e){return alert(e)}))}}),Object(a.jsx)(v,{isOpen:b,onClose:Y,onOverlay:z,onUpdateAvatar:function(e){y.updateAvatar(e).then((function(e){M(e)})).catch((function(e){return alert(e)}))}}),Object(a.jsx)(x,{isOpen:u,onClose:Y,onOverlay:z,onAddPlaceSubmit:function(e){y.addNewCard(e).then((function(e){H([e].concat(Object(s.a)(G)))})).catch((function(e){return alert(e)}))}}),Object(a.jsx)(C,{isOpen:L,onClose:Y,onOverlay:z,onConfirmDeleteSubmit:function(e){y.deleteCard(e._id).then((function(){var t=G.filter((function(t){return t._id!==e._id}));H(t)})).catch((function(e){return alert(e)}))},card:U})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root")),L()},7:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.d321a4d8.chunk.js.map